var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{p as t}from"./phaser-DM0uoNMb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();class a extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("background_bg","assets/background/1.png"),this.load.image("background_sun","assets/background/2.png"),this.load.image("background_top_threes","assets/background/3.png"),this.load.image("background_mid_threes","assets/background/4.png"),this.load.image("background_bot_threes","assets/background/5.png"),this.load.image("background_red_bg","assets/background/6.png"),this.load.image("background_floor","assets/background/7.png"),this.load.image("background_floor_threes","assets/background/8.png")}create(){this.scene.start("Preloader")}}class i extends t.Scene{constructor(){super("Game"),s(this,"health",100),s(this,"healthText"),s(this,"playVideo",!1),s(this,"lastEnemySpawn",0),s(this,"enemySpawnInterval",1500),s(this,"x",0),s(this,"rollDirection",null),s(this,"enemies",null),s(this,"killCount",0),s(this,"killText"),s(this,"currentFactIndex",0),s(this,"messageContainer"),s(this,"messageBg"),s(this,"messageText"),s(this,"facts",["¿Sabías que? El abuso de drogas puede llevar a serios problemas de salud.","La adicción altera la función cerebral y el comportamiento.","Alguien murio por la bala que pagaste.","Buscar ayuda es una señal de fortaleza.","El abuso de drogas impacta a familias y comunidades.","Cuando consumes drogas estás apoyando un sistema que perpetúa la injusticia y el dolor.","Tú perpetuas el ciclo de sufrimiento",,"La rehabilitación está disponible para quienes la necesitan.","Tú podrías ser el siguiente","Tú mereces ser el siguiente","Cada vez que compras drogas, estás financiando el crimen organizado que destruye vidas y comunidades enteras.","El narcotráfico es responsable de miles de muertes violentas cada año, incluyendo las de inocentes atrapados en medio de la violencia.","Los cárteles de drogas no solo trafican sustancias, sino también personas, perpetuando el sufrimiento humano a nivel global.","El abuso de drogas está vinculado a la desintegración familiar, dejando a niños vulnerables y desprotegidos.","La producción de drogas ilegales implica trabajo forzado, explotación y la destrucción de ecosistemas enteros.","Al consumir drogas, contribuyes a un sistema que perpetúa la violencia, el miedo y la corrupción.","El abuso de drogas causa más de 500,000 muertes anuales en todo el mundo debido a sobredosis y problemas de salud relacionados.","Muchas comunidades rurales son desplazadas por el cultivo y producción de drogas ilegales, dejando a familias sin hogar.","El tráfico de drogas alimenta el lavado de dinero, afectando economías y debilitando los sistemas de justicia en muchos países.","Las guerras contra el narcotráfico han dejado miles de niños huérfanos y generaciones enteras traumatizadas.","Las drogas no solo destruyen a los consumidores, sino que siembran miedo y sufrimiento en quienes están a su alrededor.","El crimen organizado utiliza niños como 'mulas' para transportar drogas, robándoles su infancia y futuro.","Verdad: Las drogas ilegales están vinculadas al aumento de la trata de personas, el tráfico de armas y otros delitos graves."])}displayFact(e){this.messageText.setText(e),this.messageContainer.setAlpha(1),this.tweens.add({targets:this.messageContainer,alpha:1,duration:500,ease:"Linear",onComplete:()=>{this.time.delayedCall(3e3,(()=>{this.tweens.add({targets:this.messageContainer,alpha:0,duration:1e3,ease:"Linear"})}),[],this)}})}handlePlayerEnemyCollision(e,s){"homeless_1_death"===s.anims.currentAnim.key||(s.anims.play("homeless_1_death",!0),s.body.setVelocity(0,0),s.body.allowGravity=!1,this.health-=20,this.time.delayedCall(100,(()=>{s.destroy()}),[],this),this.healthText.setText("Health: "+this.health),this.health<=0&&this.scene.start("GameOver",{score:this.killCount}))}spawnEnemy(e){const s=[{x:0,y:830},{x:1980,y:830}],t=Phaser.Utils.Array.GetRandom(s),a=this.enemies.create(t.x,t.y,"enemy");t==s[1]?(a.flipX=!0,a.body.setOffset(60,50)):a.body.setOffset(30,50),a.setOrigin(.5,.5),a.setBodySize(40,50,!1),a.setCollideWorldBounds(!0),a.setBounce(1),a.setScale(3),a.anims.play("homeless_1_run"),this.physics.moveToObject(a,e,250)}attack(){"attack_1"!==this.player.anims.currentAnim.key&&"attack_2"!==this.player.anims.currentAnim.key&&(0===this.x?(this.player.anims.play("attack_1"),this.x=1):1===this.x&&(this.player.anims.play("attack_2"),this.x=0),this.sound.play("hit"),this.time.delayedCall(200,(()=>{this.enemies.getChildren().forEach((e=>{const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,e.x,e.y);(s<250&&13===this.player.body.facing&&!1===e.flipX||s<250&&(14===this.player.body.facing&&!0===e.flipX||10===this.player.body.facing&&!0===e.flipX))&&(e.anims.play("homeless_1_death",!0),e.body.setVelocity(0,0),e.body.allowGravity=!1,this.time.delayedCall(1e3,(()=>{e.destroy(),this.killCount+=1,this.killText.setText("Kills: "+this.killCount),this.killCount%5==0&&this.currentFactIndex<this.facts.length&&(this.displayFact(this.facts[this.currentFactIndex]),this.currentFactIndex+=1)}),[],this))}))})),this.player.once("animationcomplete",(()=>{this.player.anims.play("idle",!0)})))}moveTiles(e){"left"===e?(this.top_threes.tilePositionX-=.5,this.mid_threes.tilePositionX-=1,this.bot_thres.tilePositionX-=2,this.floor.tilePositionX-=6,this.floor_threes.tilePositionX-=6):"right"===e&&(this.top_threes.tilePositionX+=.5,this.mid_threes.tilePositionX+=1,this.bot_thres.tilePositionX+=2,this.floor.tilePositionX+=6,this.floor_threes.tilePositionX+=6)}create(){this.killCount=0,this.cameras.main.setBackgroundColor(65280),this.sound.stopByKey("menu"),this.song=this.sound.add("game",{loop:!0,volume:.1}),this.song.play(),this.health=100,this.add.image(990,540,"background_bg"),this.sun=this.add.image(990,540,"background_sun"),this.top_threes=this.add.tileSprite(990,540,1980,1080,"background_top_threes"),this.mid_threes=this.add.tileSprite(990,540,1980,1080,"background_mid_threes"),this.bot_thres=this.add.tileSprite(990,540,1980,1080,"background_bot_threes"),this.add.image(990,540,"background_red_bg"),this.floor=this.add.tileSprite(990,540,1980,1080,"background_floor"),this.floor_threes=this.add.tileSprite(990,540,1980,1080,"background_floor_threes");let e=this.anims.create("idle");console.log(e),this.anims.create("attack_1"),this.enemies=this.physics.add.group(),this.ctrl=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.CTRL),this.player=this.physics.add.sprite(1010,830,"idle","_idle_0").setScale(5),this.player.setOrigin(.5,.5),console.log(this.player.getCenter()),console.log(this.player.originX,this.player.originY),console.log(this.player.body.center),this.player.setCollideWorldBounds(!0),this.player.setBodySize(30,45,!0),this.player.body.setOffset(40,35),this.player.play("idle"),this.player.body.debugShowBody,this.cursors=this.input.keyboard.createCursorKeys(),this.attackKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.physics.add.overlap(this.player,this.enemies,this.handlePlayerEnemyCollision,null,this),this.attackKey.on("down",(()=>{this.attack()})),this.killText=this.add.text(16,16,"Kills: 0",{fontSize:"20px",fill:"#ffffff"}),this.healthText=this.add.text(16,40,"Health: 100",{fontSize:"20px",fill:"#ffffff"}),this.messageBg=this.add.graphics(),this.messageBg.fillStyle(0,.7),this.messageBg.fillRect(-350,-50,700,100),this.messageText=this.add.text(0,0,"",{fontSize:"30px",fill:"#ffffff",align:"center",wordWrap:{width:700}}),this.messageText.setOrigin(.5),this.messageContainer=this.add.container(990,200,[this.messageBg,this.messageText]),this.messageContainer.setAlpha(0)}update(e){50===this.killCount&&(this.killCount+=1);let s=!1;if(this.player.body.setOffset(40,35),console.log(this.health),this.player.body.setVelocityX(0),this.cursors.left.isDown){if("attack_1"===this.player.anims.currentAnim.key||"attack_2"===this.player.anims.currentAnim.key)return;this.player.body.setOffset(50,35),this.player.body.setVelocityX(-200),this.moveTiles("left"),this.player.anims.play("run",!0),s=!0,this.player.flipX=!0}else if(this.cursors.right.isDown){if("attack_1"===this.player.anims.currentAnim.key||"attack_2"===this.player.anims.currentAnim.key)return;this.player.body.setVelocityX(200),this.moveTiles("right"),this.player.anims.play("run",!0),s=!0,this.player.flipX=!1}s||"attack_1"===this.player.anims.getName()||"attack_2"===this.player.anims.getName()||this.player.anims.play("idle",!0),e>this.lastEnemySpawn+this.enemySpawnInterval&&(this.spawnEnemy(this.player),this.lastEnemySpawn=e)}}class o extends t.Scene{constructor(){super("GameOver")}init(e){console.log("init",e),this.finalScore=e.score}create(){this.cameras.main.setBackgroundColor(16711680),this.sound.stopByKey("game"),console.log(this.finalScore),this.finalScore>100?(this.video=this.add.video(1e3,500,"no_es_cierto").setOrigin(.5,.5).setScale(1.8),this.video.play()):(this.song=this.sound.add("death",{loop:!0,volume:.5}),this.song.play(),this.bg=this.add.sprite(990,540,"death_bg","kaleicospio03-sheet_0"),this.bg.setDisplaySize(1980,1080),this.bg.play("death_bg"),this.add.text(990,540,"MUERTO",{fontFamily:"dungeon",fontSize:320,color:"#ad0e00",stroke:"#000000",strokeThickness:80,align:"center"}).setOrigin(.5),this.add.text(990,840,"Las drogas matan",{fontFamily:"dungeon",fontSize:50,color:"#ffffff",stroke:"#000000",strokeThickness:80,align:"center"}).setOrigin(.5)),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class n extends t.Scene{constructor(){super("MainMenu")}create(){this.add.image(990,540,"background_bg"),this.add.image(990,540,"background_sun"),this.add.image(990,540,"background_top_threes"),this.add.image(990,540,"background_mid_threes"),this.add.image(990,540,"background_bot_threes"),this.add.image(990,540,"background_red_bg"),this.add.image(990,540,"background_floor"),this.add.image(990,540,"background_floor_threes"),this.sound.stopByKey("death"),this.music=this.sound.add("menu",{volume:.3,loop:!0}),this.music.play(),this.add.text(990,300,"Sacrus   Corpus",{fontFamily:"dungeon",fontSize:220,color:"#ffffff",stroke:"#000000",strokeThickness:80,align:"center"}).setOrigin(.5);let e=this.anims;console.log(e);let s=this.anims.create("idle");console.log(s),this.add.sprite(1010,830,"idle","_idle_0").setScale(5).play("idle");const t=this.add.rectangle(990,600,200,100,"#ffffff",1).setInteractive();t.name="JUGAR",t.setScale(2,1.5);const a=this.add.text(1090,608,"J U G A R",{fontFamily:"dungeon",fontSize:80,color:"#ffffff",stroke:"#000000",strokeThickness:70,align:"center"}).setOrigin(.5);a.x+=(t.width-a.width)/2,this.input.on("gameobjectdown",(function(e,s){this.scene.start("Game")}),this)}}class l extends t.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(s=>{e.width=4+460*s}))}preload(){this.load.atlas("idle","assets/player/idle/idle.png","assets/player/idle/idle_atlas.json"),this.load.atlas("attack_1","assets/player/attack_1/attack_1.png","assets/player/attack_1/attack_1_atlas.json"),this.load.atlas("attack_2","assets/player/attack_2/attack_2.png","assets/player/attack_2/attack_2_atlas.json"),this.load.atlas("run","assets/player/run/run.png","assets/player/run/run_atlas.json"),this.load.atlas("death","assets/player/death/death.png","assets/player/death/death_atlas.json"),this.load.atlas("roll","assets/player/roll/roll.png","assets/player/roll/roll_atlas.json"),this.load.animation("player_idle_anim","assets/player/idle/idle_anim.json"),this.load.animation("player_attack_2_anim","assets/player/attack_2/attack_2_anim.json"),this.load.animation("player_attack_1_anim","assets/player/attack_1/attack_1_anim.json"),this.load.animation("player_run_anim","assets/player/run/run_anim.json"),this.load.animation("player_death_anim","assets/player/death/death_anim.json"),this.load.animation("player_roll_anim","assets/player/roll/roll_anim.json"),this.load.atlas("homeless_1_death","assets/homeless/homeless_1/death/homeless_death.png","assets/homeless/homeless_1/death/homeless_death_atlas.json"),this.load.animation("homeless_1_death_anim","assets/homeless/homeless_1/death/homeless_death_anim.json"),this.load.atlas("homeless_1_run","assets/homeless/homeless_1/run/homeless_1_run.png","assets/homeless/homeless_1/run/homeless_1_run_atlas.json"),this.load.animation("homeless_1_run_anim","assets/homeless/homeless_1/run/homeless_1_run_anim.json"),this.load.atlas("death_bg","assets/death_bg/death_bg.png","assets/death_bg/death_bg_atlas.json"),this.load.animation("death_bg_anim","assets/death_bg/death_bg_anim.json"),this.load.video("no_es_cierto","assets/no_es_cierto.mp4"),this.load.setPath("assets/sounds/"),this.load.audio("menu",["menu.wav"]),this.load.audio("game",["battle.wav"]),this.load.audio("hit",["hit.wav"]),this.load.audio("death",["in-the-wreckage.wav"]),new FontFace("dungeon","url(assets/DungeonFont.ttf)").load().then((function(e){document.fonts.add(e)})).catch((function(e){return e}))}create(){this.scene.start("MainMenu")}}const r={type:Phaser.AUTO,width:1980,height:1080,parent:"game-container",backgroundColor:"#028af8",physics:{default:"arcade",arcade:{debug:!1}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,l,n,i,o]};new Phaser.Game(r);
